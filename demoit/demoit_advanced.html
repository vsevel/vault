
---

<h1>TLS</h1>

<h2>Avoid man-in-the middle attack</h2>
<h2>Confidentiality</h2>
<h2>Inside and outside the cluster</h2>

---

<h1>TLS</h1>

<div class="split">
    <web-term path="ext-tls-vault"></web-term>
    <source-code folder="ext-tls-vault"
        files="cheat-sheet create-cert.sh vault-csr.json vault-deployment.yaml vault-ingress.yaml nginx-ingress-controller.yaml"
        start-lines="0;0;0;58,64,70,75,77;7,17;222"
        end-lines="0;0;0;59,65,70,75,79;7,18;223">
    </source-code>
</div>

---

<h1>TLS</h1>

<img src="/images/diag-ext-tls.png" />

---

<h1>TLS: Recap</h1>

<h2>CSR</h2>
<h2>Required on all inter-pod communications</h2>
<h2>Consul intra-cluster communications: gossip</h2>
<h2>OpenShift: edge, passthrough and reencrypt</h2>
<h2>Fast forward: Istio</h2>

---

<h1>Vault Admin</h1>

<h2>How do I know a vault needs to be unsealed?</h2>
<h2>How do I unseal my vaults?</h2>
<h2>How do I list vaults?</h2>
<h2>How do I address a specific vault?</h2>
<h2>Challenge: seal status is an in-memory state</h2>

---

<h1>Vault Admin</h1>

<div class="split">
    <web-term path="ext-admin-vault"></web-term>
    <source-code folder="ext-admin-vault"
        files="cheat-sheet role-pod-reader.yaml"
        start-lines="0;0"
        end-lines="0;0">
    </source-code>
</div>

---

<h1>Vault Admin</h1>

<img src="/images/diag-ext-admin.png" />

---

<h1>Vault Admin: Recap</h1>

<h2>API Server</h2>
<h2>DNS A record “pod-ip-address.my-namespace.pod.cluster.local“</h2>
<h2>Should Vault be a StatefulSet?</h2>
<h2>Opportunity: Auto Unseal with HSM PKCS11, AWS KMS, ...</h2>

---